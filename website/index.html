<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>CS 184: ClothSim</title>
<script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<link href="//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.css" type="text/css" rel="stylesheet" />
<link href="//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.gallery.min.css" type="text/css" rel="stylesheet" />
<style>
    body {
        padding: 100px;
        width: 1000px;
        margin: auto;
        text-align: left;
        font-weight: 300;
        font-family: 'Open Sans', sans-serif;
        color: #121212;
        line-height: 1.5;
    }
    div.padded {
        padding-top: 0px;
        padding-right: 100px;
        padding-bottom: 0.25in;
        padding-left: 100px;
    }
</style>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>

<body>

<h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2021</h1>
<h1 align="middle">Project 4: Cloth Simulator</h1>
<h2 align="middle">Lindsey Guan & Simon Yei</h2>

<h2 align="middle">Overview</h2>
<p>Give a high-level overview of what you implemented in this project. Think about what you've built as a whole. Share your thoughts on what interesting things you've learned from completing the project.</p>
<h2 align="middle">Part I: Masses and springs</h2>

<p>
        Our cloth model is represented by a set of point masses and springs. The cloth consists of a set of evenly-spaced point
    masses and each point mass is connected to other masses with springs. We have three types of springs, each representing a
    different kind of constraint between the masses: structural, shearing, and bending.
    <br><br>
        Below, we show our cloth in wireframe mode with point masses and all constraints, then with no shearing constraints,
    and lastly, with only shearing constraints.
</p>
<div align="center">
    <p align="middle">Click to enlarge images.</p>
    <table style="width=100%">
        <th colspan="2" align="middle">All constraints</th>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part1_all_large.png"><img src="images/part1_all_large.png" width="400px"/></a>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part1_all.png"><img src="images/part1_all.png" width="400px"/></a>
            </td>
        </tr>
        <th colspan="2" align="middle">No shearing constraints</th>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part1_no_shearing_large.png"><img src="images/part1_no_shearing_large.png" width="400px"/></a>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part1_no_shearing.png"><img src="images/part1_no_shearing.png" width="400px"/></a>
            </td>
        </tr>
        <th colspan="2" align="middle">Only shearing constraints</th>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part1_only_shearing_large.png"><img src="images/part1_only_shearing_large.png" width="400px"/></a>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part1_only_shearing.png"><img src="images/part1_only_shearing.png" width="400px"/></a>
            </td>
        </tr>
    </table>
</div>

<h2 align="middle">Part II: Simulation via numerical integration</h2>

<p>
    In order to apply forces on our cloth model, we computed the total force acting on each point mass due to spring
    forces and gravity. We then use Verlet integration, which uses the current position,
    velocity, total acceleration, and a damping constant to update each point mass's position. Damping aims to
    simulate loss of energy due to friction and heat loss by slightly down-scaling velocity. Lastly, we prevent spring
    deformation by ensuring that a spring's length is at most 10% greater than its rest length.
    <br><br>
    Here, we show the pinned cloth from <code>pinned4.json</code> at resting state with the default parameters.
</p>

<div align="center">
    <table style="width=100%">
        <tr>
            <td colspan="2" align="middle">
                <a class="gallery" href="images/part2_default.png"><img src="images/part2_default.png" width="400px"/></a>
            </td>
        </tr>
    </table>
    <p align="left">
        When we lower the density of the cloth while the simulation plays, we see the cloth billow a little bit and develop
        a softer, more wrinkly behavior. However, there isn't much of a noticeable difference between the default density and
        lower density simulations when we play it from the beginning.
        When we increase the density of the cloth while the simulation plays, we see the cloth sink a bit and the bottom of the cloth
        stretch a bit farther away from the pinned areas.
    </p>
    <table style="width=100%">
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part2_low_density.png"><img src="images/part2_low_density.png" width="400px"/></a>
                <figcaption align="middle">low density (1 g/cm^2)</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part2_high_density.png"><img src="images/part2_high_density.png" width="400px"/></a>
                <figcaption align="middle">high density (1000 g/cm^2)</figcaption>
            </td>
        </tr>
    </table>
    <p align="left">
        When we lower the spring constant of the cloth while the simulation plays, we see the cloth wiggle a bit and then
        quickly settle into a resting state.
        When we increase the spring constant of the cloth while the simulation plays, we see the cloth dramatically billow up
        and down and then eventually reach a resting state.
    </p>
    <table style="width=100%">
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part2_low_ks.png"><img src="images/part2_low_ks.png" width="400px"/></a>
                <figcaption align="middle">low spring constant (ks = 5 N/m)</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part2_high_ks.png"><img src="images/part2_high_ks.png" width="400px"/></a>
                <figcaption align="middle">high spring constant (ks = 50000 N/m)</figcaption>
            </td>
        </tr>
    </table>
    <p align="left">
        Lastly, when we lower the damping of the cloth, we see the cloth bounce and ripple after it falls.
        When we increase the damping of the cloth, we see the cloth smoothly settle into resting state with little to no
        visible wrinkles.
    </p>
    <table style="width=100%">
        <tr>
        <td align="middle">
            <a class="gallery" href="images/part2_low_damping.png"><img src="images/part2_low_damping.png" width="400px"/></a>
            <figcaption align="middle">low damping (8%)</figcaption>
        </td>
        <td align="middle">
            <a class="gallery" href="images/part2_high_damping.png"><img src="images/part2_high_damping.png" width="400px"/></a>
            <figcaption align="middle">high damping (79%)</figcaption>
        </td>
        </tr>
    </table>
</div>

<h2 align="middle">Part III: Handling collisions with other objects</h2>

<p>
    Now that we've implemented forces and estimating the updated positions of point masses, we can implement collision
    handling for our cloth.
    <br><br>
    When a point mass on the cloth collides with a surface at a certain timestep, we apply a correction vector to the point mass's
    last position so that the point mass gets bumped up to the surface, ensuring we don't get clipping of the
    cloth through an object.
    <br><br>
    Below, we show the cloth landing on a plane and a sphere.
</p>

<div align="center">
    <table style="width=100%">
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part3_plane.png"><img src="images/part3_plane.png" width="400px"/></a>
                <figcaption align="middle">plane collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part3_sphere.png"><img src="images/part3_sphere.png" width="400px"/></a>
                <figcaption align="middle">sphere collision</figcaption>
            </td>
        </tr>
    </table>
    <p align="left">
        When we lower the spring constant, we see the cloth fall to a more "limp" resting state. We see more wrinkles and a
        more flexible cloth due to lower constraints between the point masses. Conversely, we see a more rigid cloth
        with a higher spring constant with the corners of the cloth sticking out from the sphere a bit due to the tighter
        constraints between the point masses.
    </p>
    <table style="width=100%">
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part3_sphere_low_ks.png"><img src="images/part3_sphere_low_ks.png" width="400px"/></a>
                <figcaption align="middle">low spring constant</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part3_sphere_high_ks.png"><img src="images/part3_sphere_high_ks.png" width="400px"/></a>
                <figcaption align="middle">high spring constant</figcaption>
            </td>
        </tr>
    </table>
</div>

<h2 align="middle">Part IV: Handling self-collisions</h2>
<div align="center">
    <table style="width=100%">
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part4_default1.png"><img src="images/part4_default1.png" width="300px"/></a>
                <figcaption align="middle">default settings, initial collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_default2.png"><img src="images/part4_default2.png" width="300px"/></a>
                <figcaption align="middle">default settings, mid-collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_default3.png"><img src="images/part4_default3.png" width="300px"/></a>
                <figcaption align="middle">default settings, resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part4_low_density1.png"><img src="images/part4_low_density1.png" width="300px"/></a>
                <figcaption align="middle">low density, initial collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_low_density2.png"><img src="images/part4_low_density2.png" width="300px"/></a>
                <figcaption align="middle">low density, mid-collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_low_density3.png"><img src="images/part4_low_density3.png" width="300px"/></a>
                <figcaption align="middle">low density, resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part4_high_density1.png"><img src="images/part4_high_density1.png" width="300px"/></a>
                <figcaption align="middle">high density, initial collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_high_density2.png"><img src="images/part4_high_density2.png" width="300px"/></a>
                <figcaption align="middle">high density, mid-collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_high_density3.png"><img src="images/part4_high_density3.png" width="300px"/></a>
                <figcaption align="middle">high density, resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part4_low_ks1.png"><img src="images/part4_low_ks1.png" width="300px"/></a>
                <figcaption align="middle">low spring constant, initial collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_low_ks2.png"><img src="images/part4_low_ks2.png" width="300px"/></a>
                <figcaption align="middle">low spring constant, mid-collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_low_ks3.png"><img src="images/part4_low_ks3.png" width="300px"/></a>
                <figcaption align="middle">low spring constant, resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part4_high_ks1.png"><img src="images/part4_high_ks1.png" width="300px"/></a>
                <figcaption align="middle">high spring constant, initial collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_high_ks2.png"><img src="images/part4_high_ks2.png" width="300px"/></a>
                <figcaption align="middle">high spring constant, mid-collision</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part4_high_ks3.png"><img src="images/part4_high_ks3.png" width="300px"/></a>
                <figcaption align="middle">high spring constant, resting state</figcaption>
            </td>
        </tr>
    </table>
</div>

<h2 align="middle">Part V: Shaders</h2>
<div align="center">
    <table style="width=100%">
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part5_normal1.png"><img src="images/part5_normal1.png" width="400px"/></a>
                <figcaption align="middle">normal shader on sphere</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part5_normal2.png"><img src="images/part5_normal2.png" width="400px"/></a>
                <figcaption align="middle">normal shader at resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part5_diffuse1.png"><img src="images/part5_diffuse1.png" width="400px"/></a>
                <figcaption align="middle">diffuse shader on sphere</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part5_diffuse2.png"><img src="images/part5_diffuse2.png" width="400px"/></a>
                <figcaption align="middle">diffuse shader at resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part5_phong1.png"><img src="images/part5_phong1.png" width="400px"/></a>
                <figcaption align="middle">Blinn-Phong shader on sphere</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part5_phong2.png"><img src="images/part5_phong2.png" width="400px"/></a>
                <figcaption align="middle">Blinn-Phong shader at resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part5_texture1.png"><img src="images/part5_texture1.png" width="400px"/></a>
                <figcaption align="middle">texture mapping shader on sphere</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part5_texture2.png"><img src="images/part5_texture2.png" width="400px"/></a>
                <figcaption align="middle">texture mapping shader at resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part5_bump1.png"><img src="images/part5_bump1.png" width="400px"/></a>
                <figcaption align="middle">bump shader on sphere</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part5_bump2.png"><img src="images/part5_bump2.png" width="400px"/></a>
                <figcaption align="middle">bump shader at resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part5_displacement1.png"><img src="images/part5_displacement1.png" width="400px"/></a>
                <figcaption align="middle">displacement shader on sphere</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part5_displacement2.png"><img src="images/part5_displacement2.png" width="400px"/></a>
                <figcaption align="middle">displacement shader at resting state</figcaption>
            </td>
        </tr>
        <tr>
            <td align="middle">
                <a class="gallery" href="images/part5_mirror1.png"><img src="images/part5_mirror1.png" width="400px"/></a>
                <figcaption align="middle">mirror shader on sphere</figcaption>
            </td>
            <td align="middle">
                <a class="gallery" href="images/part5_mirror2.png"><img src="images/part5_mirror2.png" width="400px"/></a>
                <figcaption align="middle">mirror shader at resting state</figcaption>
            </td>
        </tr>
    </table>
</div>

<script src="//code.jquery.com/jquery-latest.js"></script>
<script src="//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
<script src="//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.gallery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/detect_swipe/2.1.1/jquery.detect_swipe.min.js"></script>
<script>
    $(document).ready(function() {
        $('.gallery').featherlightGallery();
    });

    $('a.gallery').featherlightGallery( {
        previousIcon: '&#9664;',     /* Code that is used as previous icon */
        nextIcon: '&#9654;',         /* Code that is used as next icon */
        galleryFadeIn: 100,          /* fadeIn speed when slide is loaded */
        galleryFadeOut: 300          /* fadeOut speed before slide is loaded */
    });
</script>
</body>
</html>
